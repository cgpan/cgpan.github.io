<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>F-Distribution Explorer</title>
  <style>
    :root {
      color-scheme: light;
      --bg: #f6f7fb;
      --panel: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --accent: #3b82f6;
      --accent-2: #10b981;
      --accent-3: #f59e0b;
      --border: #e5e7eb;
      --shadow: 0 10px 24px rgba(0,0,0,0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
    }
    header {
      padding: 24px 28px 8px 28px;
    }
    h1 {
      margin: 0 0 6px 0;
      font-size: 28px;
      font-weight: 700;
    }
    p.lead {
      margin: 0 0 10px 0;
      color: var(--muted);
    }
    .container {
      padding: 18px 28px 28px 28px;
      display: grid;
      gap: 18px;
      grid-template-columns: 1fr;
    }
    .controls {
      background: var(--panel);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: 14px;
      padding: 18px;
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      align-items: center;
    }
    .control-group label {
      display: block;
      font-size: 12px;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .control-group input[type="range"] {
      width: 100%;
    }
    .value-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
      font-weight: 600;
      font-size: 13px;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid transparent;
      background: var(--accent);
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.05s ease, background 0.2s ease;
      margin-right: 8px;
    }
    .btn:active { transform: scale(0.98); }
    .btn.secondary {
      background: #fff;
      border-color: var(--border);
      color: var(--text);
    }
    .btn.active {
      background: var(--accent-2);
    }
    .grid {
      display: grid;
      gap: 18px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 14px;
      min-height: 0;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 10px;
    }
    .panel h3 {
      margin: 0;
      font-size: 16px;
    }
    canvas {
      width: 100%;
      height: 200px;
    }
    .stats {
      font-size: 13px;
      color: var(--muted);
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    .stat {
      background: #f9fafb;
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 4px 10px;
    }
    .stat.result-box {
      border-radius: 12px;
      padding: 10px 14px;
      min-width: 200px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      box-shadow: inset 0 0 0 1px var(--border);
      font-weight: 600;
      color: var(--text);
    }
    .footer-note {
      font-size: 13px;
      color: var(--muted);
    }
    .table-wrap {
      overflow: auto;
      border: 1px solid var(--border);
      border-radius: 12px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    th, td {
      padding: 8px 10px;
      border-bottom: 1px solid var(--border);
      text-align: right;
      white-space: nowrap;
    }
    th:first-child, td:first-child { text-align: left; }
    thead th {
      position: sticky;
      top: 0;
      background: #f3f4f6;
      z-index: 1;
    }
    .inline-inputs {
      display: flex;
      gap: 16px;
      align-items: flex-end;
      flex-wrap: wrap;
    }
    .field {
      display: grid;
      gap: 6px;
      min-width: 140px;
    }
    .field label {
      font-size: 12px;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .field input[type="number"] {
      width: 140px;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
    }
    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      background: #ecfdf3;
      color: #047857;
      border: 1px solid #a7f3d0;
    }
    select {
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #fff;
    }
    .ratio-box {
      background: #f8fafc;
      border: 1px dashed #d1d5db;
      border-radius: 12px;
      padding: 12px;
      display: grid;
      gap: 8px;
    }
    .ratio-line {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 14px;
    }
    .ratio-line strong {
      font-size: 15px;
    }
  </style>
</head>
<body>
  <header>
    <h1>F-Distribution Explorer</h1>
    <p class="lead">Explore the F-distribution for variance ratios. The F-test compares F = s<sub>1</sub><sup>2</sup> / s<sub>2</sub><sup>2</sup> with df<sub>1</sub> = n<sub>1</sub> - 1 and df<sub>2</sub> = n<sub>2</sub> - 1. In common practice, the F-test is almost always a one-tailed (specifically, right-tailed) test.</p>
    <p class="footer-note">By <a href="https://cpan.ai/" target="_blank" rel="noopener noreferrer">Chenguang Pan</a>.</p>
  </header>

  <div class="container">
    <div class="grid">
      <div class="panel" style="grid-column: span 2;">
        <div class="panel-header">
          <h3>F-Distribution & Tail Area</h3>
          <div>
            <span class="badge">Default: Right Tail</span>
            <button id="oneTailBtn" class="btn active">Right Tail</button>
            <button id="twoTailBtn" class="btn secondary">Two Tail</button>
          </div>
        </div>
        <canvas id="fCanvas" width="700" height="220"></canvas>
        <div class="stats">
          <span class="stat" id="pValueStat">p-value: 0.1042</span>
          <span class="stat" id="criticalStat">Critical F: 2.96</span>
        </div>
      </div>

      <div class="panel">
        <h3>Variance Ratio Lens</h3>
        <div class="inline-inputs">
          <div class="field">
            <label for="var1Input">Sample variance s<sub>1</sub><sup>2</sup></label>
            <input id="var1Input" type="number" min="0.0001" step="0.01" value="2.4" />
          </div>
          <div class="field">
            <label for="n1Input">Sample size n<sub>1</sub></label>
            <input id="n1Input" type="number" min="2" step="1" value="9" />
          </div>
          <div class="field">
            <label for="var2Input">Sample variance s<sub>2</sub><sup>2</sup></label>
            <input id="var2Input" type="number" min="0.0001" step="0.01" value="1.5" />
          </div>
          <div class="field">
            <label for="n2Input">Sample size n<sub>2</sub></label>
            <input id="n2Input" type="number" min="2" step="1" value="11" />
          </div>
        </div>
        <div class="ratio-box" style="margin-top:10px;">
          <div class="ratio-line">
            <span>Variance ratio</span>
            <strong id="ratioText">F = 1.60</strong>
            <span id="ratioDf">(df1 = 8, df2 = 10)</span>
          </div>
          <div class="ratio-line" style="color: var(--muted);">
            Use this ratio as your F statistic in the calculator.
          </div>
        </div>
      </div>

      <div class="panel">
        <h3>P-value Calculator</h3>
        <div class="inline-inputs">
          <div class="field">
            <label for="fInput">F value</label>
            <input id="fInput" type="number" step="0.01" value="1.60" />
          </div>
          <div class="field">
            <label for="df1Input">df1 (numerator)</label>
            <input id="df1Input" type="number" min="1" step="1" value="8" />
          </div>
          <div class="field">
            <label for="df2Input">df2 (denominator)</label>
            <input id="df2Input" type="number" min="1" step="1" value="10" />
          </div>
        </div>
        <div class="stats" style="margin-top:10px;">
          <span class="stat result-box" id="pValueInline">p-value: 0.1042</span>
        </div>
      </div>

      <div class="panel">
        <h3>Critical F-Value Calculator</h3>
        <div class="inline-inputs">
          <div class="field">
            <label for="alphaInput">Alpha (significance level)</label>
            <input id="alphaInput" type="number" step="0.001" value="0.05" />
          </div>
          <div class="field">
            <label for="df1Input2">df1 (numerator)</label>
            <input id="df1Input2" type="number" min="1" step="1" value="8" />
          </div>
          <div class="field">
            <label for="df2Input2">df2 (denominator)</label>
            <input id="df2Input2" type="number" min="1" step="1" value="10" />
          </div>
        </div>
        <div class="stats" style="margin-top:10px;">
          <span class="stat result-box" id="criticalInline">Critical F: 2.96</span>
        </div>
      </div>

      <div class="panel" style="grid-column: span 2;">
        <h3>F-Table (Critical Values)</h3>
        <div class="inline-inputs" style="margin-bottom:10px;">
          <label for="tableTail">Tail</label>
          <select id="tableTail">
            <option value="right" selected>Right Tail</option>
            <option value="two">Two Tail (upper)</option>
          </select>
          <label for="tableAlphas">Alpha Levels</label>
          <select id="tableAlphas">
            <option value="0.10,0.05,0.025,0.01" selected>0.10, 0.05, 0.025, 0.01</option>
            <option value="0.20,0.10,0.05">0.20, 0.10, 0.05</option>
            <option value="0.05,0.01,0.005">0.05, 0.01, 0.005</option>
          </select>
        </div>
        <div class="table-wrap">
          <table id="fTable">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    const oneTailBtn = document.getElementById('oneTailBtn');
    const twoTailBtn = document.getElementById('twoTailBtn');

    const fCanvas = document.getElementById('fCanvas');
    const pValueStat = document.getElementById('pValueStat');
    const criticalStat = document.getElementById('criticalStat');

    const var1Input = document.getElementById('var1Input');
    const var2Input = document.getElementById('var2Input');
    const n1Input = document.getElementById('n1Input');
    const n2Input = document.getElementById('n2Input');
    const ratioText = document.getElementById('ratioText');
    const ratioDf = document.getElementById('ratioDf');

    const fInput = document.getElementById('fInput');
    const df1Input = document.getElementById('df1Input');
    const df2Input = document.getElementById('df2Input');
    const alphaInput = document.getElementById('alphaInput');
    const df1Input2 = document.getElementById('df1Input2');
    const df2Input2 = document.getElementById('df2Input2');
    const pValueInline = document.getElementById('pValueInline');
    const criticalInline = document.getElementById('criticalInline');

    const tableTail = document.getElementById('tableTail');
    const tableAlphas = document.getElementById('tableAlphas');
    const fTable = document.getElementById('fTable');

    let tailType = 'right';

    function logGamma(z) {
      const g = 7;
      const p = [
        0.99999999999980993,
        676.5203681218851,
        -1259.1392167224028,
        771.32342877765313,
        -176.61502916214059,
        12.507343278686905,
        -0.13857109526572012,
        9.9843695780195716e-6,
        1.5056327351493116e-7
      ];
      if (z < 0.5) {
        return Math.log(Math.PI) - Math.log(Math.sin(Math.PI * z)) - logGamma(1 - z);
      }
      z -= 1;
      let x = p[0];
      for (let i = 1; i < p.length; i++) {
        x += p[i] / (z + i);
      }
      const t = z + g + 0.5;
      return 0.5 * Math.log(2 * Math.PI) + (z + 0.5) * Math.log(t) - t + Math.log(x);
    }

    function logBeta(a, b) {
      return logGamma(a) + logGamma(b) - logGamma(a + b);
    }

    function betacf(a, b, x) {
      const MAXIT = 200;
      const EPS = 3e-7;
      const FPMIN = 1e-30;
      let qab = a + b;
      let qap = a + 1.0;
      let qam = a - 1.0;
      let c = 1.0;
      let d = 1.0 - qab * x / qap;
      if (Math.abs(d) < FPMIN) d = FPMIN;
      d = 1.0 / d;
      let h = d;
      for (let m = 1; m <= MAXIT; m++) {
        let m2 = 2 * m;
        let aa = m * (b - m) * x / ((qam + m2) * (a + m2));
        d = 1.0 + aa * d;
        if (Math.abs(d) < FPMIN) d = FPMIN;
        c = 1.0 + aa / c;
        if (Math.abs(c) < FPMIN) c = FPMIN;
        d = 1.0 / d;
        h *= d * c;
        aa = -(a + m) * (qab + m) * x / ((a + m2) * (qap + m2));
        d = 1.0 + aa * d;
        if (Math.abs(d) < FPMIN) d = FPMIN;
        c = 1.0 + aa / c;
        if (Math.abs(c) < FPMIN) c = FPMIN;
        d = 1.0 / d;
        let del = d * c;
        h *= del;
        if (Math.abs(del - 1.0) < EPS) break;
      }
      return h;
    }

    function betai(a, b, x) {
      if (x < 0 || x > 1) return NaN;
      if (x === 0 || x === 1) return x;
      const bt = Math.exp(logGamma(a + b) - logGamma(a) - logGamma(b) + a * Math.log(x) + b * Math.log(1.0 - x));
      if (x < (a + 1.0) / (a + b + 2.0)) {
        return bt * betacf(a, b, x) / a;
      }
      return 1.0 - bt * betacf(b, a, 1.0 - x) / b;
    }

    function fCdf(x, d1, d2) {
      if (x <= 0) return 0;
      const z = (d1 * x) / (d1 * x + d2);
      return betai(d1 / 2, d2 / 2, z);
    }

    function fPdf(x, d1, d2) {
      if (x <= 0) return 0;
      const a = d1 / 2;
      const b = d2 / 2;
      const logCoef = a * Math.log(d1 / d2) - logBeta(a, b);
      const logPdf = logCoef + (a - 1) * Math.log(x) - (a + b) * Math.log(1 + (d1 / d2) * x);
      return Math.exp(logPdf);
    }

    function fInv(p, d1, d2) {
      if (p <= 0) return 0;
      if (p >= 1) return Infinity;
      let low = 0;
      let high = 2;
      while (fCdf(high, d1, d2) < p) {
        high *= 2;
        if (high > 1e6) break;
      }
      for (let i = 0; i < 80; i++) {
        const mid = (low + high) / 2;
        const cdf = fCdf(mid, d1, d2);
        if (cdf < p) low = mid; else high = mid;
      }
      return (low + high) / 2;
    }

    function formatNumber(value, digits = 4) {
      if (!isFinite(value)) return value > 0 ? 'Inf' : '-Inf';
      return Number(value).toFixed(digits);
    }

    function getPValue(f, d1, d2, tail) {
      const cdf = fCdf(f, d1, d2);
      if (tail === 'two') {
        return 2 * Math.min(cdf, 1 - cdf);
      }
      return 1 - cdf;
    }

    function getCritical(d1, d2, alpha, tail) {
      if (tail === 'two') {
        return {
          lower: fInv(alpha / 2, d1, d2),
          upper: fInv(1 - alpha / 2, d1, d2)
        };
      }
      return { upper: fInv(1 - alpha, d1, d2) };
    }

    function drawAxis(ctx, width, height, min, max) {
      ctx.strokeStyle = '#d1d5db';
      ctx.beginPath();
      ctx.moveTo(0, height - 24);
      ctx.lineTo(width, height - 24);
      ctx.stroke();

      ctx.fillStyle = '#6b7280';
      ctx.font = '11px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      const tickCount = 7;
      for (let i = 0; i < tickCount; i++) {
        const value = min + (i / (tickCount - 1)) * (max - min);
        const x = ((value - min) / (max - min)) * width;
        ctx.beginPath();
        ctx.moveTo(x, height - 24);
        ctx.lineTo(x, height - 18);
        ctx.stroke();
        ctx.fillText(value.toFixed(1), x, height - 16);
      }
    }

    function drawFDistribution() {
      const d1 = Math.max(1, Number(df1Input.value));
      const d2 = Math.max(1, Number(df2Input.value));
      const fVal = Math.max(0.0001, Number(fInput.value));
      const critInfo = getCritical(Math.max(1, Number(df1Input2.value)), Math.max(1, Number(df2Input2.value)), Number(alphaInput.value), tailType);
      const critUpper = critInfo.upper || critInfo.upper === 0 ? critInfo.upper : critInfo.upper;
      const maxRef = Math.max(fVal * 1.6, (critUpper || fVal) * 1.6, 4.5);

      const ctx = fCanvas.getContext('2d');
      const width = fCanvas.width;
      const height = fCanvas.height;
      ctx.clearRect(0, 0, width, height);

      const minX = 0;
      const maxX = maxRef;
      const step = (maxX - minX) / 220;
      let maxY = 0;
      for (let x = step; x <= maxX; x += step) {
        maxY = Math.max(maxY, fPdf(x, d1, d2));
      }

      ctx.beginPath();
      for (let x = step; x <= maxX; x += step) {
        const y = fPdf(x, d1, d2);
        const px = ((x - minX) / (maxX - minX)) * width;
        const py = height - 24 - (y / maxY) * (height - 40);
        if (x === step) ctx.moveTo(px, py);
        else ctx.lineTo(px, py);
      }
      ctx.strokeStyle = '#3b82f6';
      ctx.lineWidth = 2;
      ctx.stroke();

      const shadeColor = 'rgba(16, 185, 129, 0.35)';
      ctx.fillStyle = shadeColor;

      function shadeTail(xStart, xEnd) {
        ctx.beginPath();
        let started = false;
        for (let x = Math.max(step, xStart); x <= xEnd; x += step) {
          const y = fPdf(x, d1, d2);
          const px = ((x - minX) / (maxX - minX)) * width;
          const py = height - 24 - (y / maxY) * (height - 40);
          if (!started) {
            ctx.moveTo(px, height - 24);
            ctx.lineTo(px, py);
            started = true;
          } else {
            ctx.lineTo(px, py);
          }
        }
        const endX = ((xEnd - minX) / (maxX - minX)) * width;
        ctx.lineTo(endX, height - 24);
        ctx.closePath();
        ctx.fill();
      }

      if (tailType === 'two') {
        const lower = critInfo.lower;
        const upper = critInfo.upper;
        shadeTail(minX, Math.min(lower, maxX));
        shadeTail(Math.min(upper, maxX), maxX);
      } else {
        shadeTail(Math.min(fVal, maxX), maxX);
      }

      drawAxis(ctx, width, height, minX, maxX);
    }

    function updateStats() {
      const d1 = Math.max(1, Number(df1Input.value));
      const d2 = Math.max(1, Number(df2Input.value));
      const fVal = Math.max(0.0001, Number(fInput.value));
      const alpha = Number(alphaInput.value);
      const critD1 = Math.max(1, Number(df1Input2.value));
      const critD2 = Math.max(1, Number(df2Input2.value));

      const p = getPValue(fVal, d1, d2, tailType);
      const crit = getCritical(critD1, critD2, alpha, tailType);

      pValueStat.textContent = `p-value: ${formatNumber(p, 4)}`;
      if (tailType === 'two') {
        criticalStat.textContent = `Critical F: ${formatNumber(crit.lower, 3)}, ${formatNumber(crit.upper, 3)}`;
      } else {
        criticalStat.textContent = `Critical F: ${formatNumber(crit.upper, 3)}`;
      }

      pValueInline.textContent = `p-value: ${formatNumber(getPValue(fVal, d1, d2, tailType), 4)}`;
      if (tailType === 'two') {
        criticalInline.textContent = `Critical F: ${formatNumber(crit.lower, 3)}, ${formatNumber(crit.upper, 3)}`;
      } else {
        criticalInline.textContent = `Critical F: ${formatNumber(crit.upper, 3)}`;
      }
    }

    function updateRatioLens() {
      const s1 = Math.max(0.0001, Number(var1Input.value));
      const s2 = Math.max(0.0001, Number(var2Input.value));
      const n1 = Math.max(2, Number(n1Input.value));
      const n2 = Math.max(2, Number(n2Input.value));
      const fVal = s1 / s2;

      ratioText.textContent = `F = ${formatNumber(fVal, 2)}`;
      ratioDf.textContent = `(df1 = ${Math.max(1, n1 - 1)}, df2 = ${Math.max(1, n2 - 1)})`;

      fInput.value = formatNumber(fVal, 2);
      df1Input.value = Math.max(1, n1 - 1);
      df2Input.value = Math.max(1, n2 - 1);
      df1Input2.value = Math.max(1, n1 - 1);
      df2Input2.value = Math.max(1, n2 - 1);
    }

    function updateAll() {
      updateStats();
      drawFDistribution();
    }

    function setTail(type) {
      tailType = type;
      if (type === 'right') {
        oneTailBtn.classList.add('active');
        oneTailBtn.classList.remove('secondary');
        twoTailBtn.classList.add('secondary');
        twoTailBtn.classList.remove('active');
      } else {
        twoTailBtn.classList.add('active');
        twoTailBtn.classList.remove('secondary');
        oneTailBtn.classList.add('secondary');
        oneTailBtn.classList.remove('active');
      }
      buildTable();
      updateAll();
    }

    function buildTable() {
      const tail = tableTail.value;
      const alphaList = tableAlphas.value.split(',').map(v => Number(v));
      const thead = fTable.querySelector('thead');
      const tbody = fTable.querySelector('tbody');
      thead.innerHTML = '';
      tbody.innerHTML = '';

      const headerRow = document.createElement('tr');
      const thDf = document.createElement('th');
      thDf.textContent = 'df1/df2';
      headerRow.appendChild(thDf);
      alphaList.forEach(alpha => {
        const th = document.createElement('th');
        th.textContent = `alpha=${alpha}`;
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);

      const dfPairs = [
        [5, 10],
        [6, 12],
        [8, 10],
        [10, 10],
        [10, 20],
        [12, 12],
        [15, 20],
        [20, 30]
      ];

      dfPairs.forEach(([d1, d2]) => {
        const row = document.createElement('tr');
        const dfCell = document.createElement('td');
        dfCell.textContent = `${d1}/${d2}`;
        row.appendChild(dfCell);
        alphaList.forEach(alpha => {
          const cell = document.createElement('td');
          const quantile = tail === 'two' ? 1 - alpha / 2 : 1 - alpha;
          const crit = fInv(quantile, d1, d2);
          cell.textContent = formatNumber(crit, 3);
          row.appendChild(cell);
        });
        tbody.appendChild(row);
      });
    }

    fInput.addEventListener('input', updateAll);
    df1Input.addEventListener('input', updateAll);
    df2Input.addEventListener('input', updateAll);
    alphaInput.addEventListener('input', updateAll);
    df1Input2.addEventListener('input', updateAll);
    df2Input2.addEventListener('input', updateAll);

    var1Input.addEventListener('input', () => { updateRatioLens(); updateAll(); });
    var2Input.addEventListener('input', () => { updateRatioLens(); updateAll(); });
    n1Input.addEventListener('input', () => { updateRatioLens(); updateAll(); });
    n2Input.addEventListener('input', () => { updateRatioLens(); updateAll(); });

    oneTailBtn.addEventListener('click', () => setTail('right'));
    twoTailBtn.addEventListener('click', () => setTail('two'));

    tableTail.addEventListener('change', buildTable);
    tableAlphas.addEventListener('change', buildTable);

    window.addEventListener('resize', () => {
      const parentWidth = fCanvas.parentElement.clientWidth - 2;
      fCanvas.width = Math.max(320, parentWidth);
      drawFDistribution();
    });

    function init() {
      const parentWidth = fCanvas.parentElement.clientWidth - 2;
      fCanvas.width = Math.max(320, parentWidth);
      updateRatioLens();
      setTail('right');
      buildTable();
      updateAll();
    }

    init();
  </script>
</body>
</html>
